query:
    index: ["selection", "parent", "METnoX_pt_low"]
    template: "SELECT {columns} FROM Events WHERE {selection} GROUP BY {groupby}"
    aliases:
        Weight_Baseline:
            "WeightXsLumi*WeightQcdEwk*WeightPU*WeightPreFiring"
        Weight_SelectElectrons:
            "WeightElectronSelectionIdIsoTight*WeightElectronSelectionReco"
        Weight_VetoElectrons:
            "WeightOneMinusElectronVetoNoSelectionIdIsoVeto*WeightOneMinusElectronSelectionIdIsoTight*WeightOneMinusElectronVetoReco"
        Weight_SelectMuons:
            "WeightMuonSelectionIdTight*WeightMuonSelectionIsoTight"
        Weight_VetoMuons:
            "WeightOneMinusMuonVetoNoSelectionIdLoose*WeightOneMinusMuonVetoNoSelectionIsoLoose*WeightOneMinusMuonSelectionIdTight*WeightOneMinusMuonSelectionIsoTight"
        Weight_SelectTaus:
            "WeightTauSelectionIdTight"
        Weight_VetoTaus:
            "WeightOneMinusTauSelectionIdTight"
        Weight_VetoPhotonsBJets:
            "WeightOneMinusPhotonVetoIdLoose*WeightOneMinusPhotonVetoPixelSeedVeto*WeightOneMinusJetBVetoIdMedium"
    histograms:
        METnoX_pt:
            columns:
                - "parent, LeptonIsElectron, LeptonIsMuon, LeptonIsTau, nGenTauL, CAST(METnoX_pt/10. as int)*10 as METnoX_pt_low"
                - "SUM({Weight}) as sum_w"
                - "SUM({Weight}*{Weight}) as sum_ww"
                - "SUM({Weight}*LHEScaleWeight0) as qcdscale0"
                - "SUM({Weight}*LHEPdfWeight0) as pdf0"
            selection:
                Monojet:
                    selection: "Cutflow_Monojet==1"
                    weights: "{Weight_Baseline}*WeightMETTrig*{Weight_VetoElectrons}*{Weight_VetoMuons}*{Weight_VetoTaus}*{Weight_VetoPhotonsBJets}"
                SingleMuon:
                    selection: "Cutflow_SingleMuon==1"
                    weights: "{Weight_Baseline}*WeightMETTrig*{Weight_VetoElectrons}*{Weight_SelectMuons}*{Weight_VetoTaus}*{Weight_VetoPhotonsBJets}"
            groupby:
                "parent, LeptonIsElectron, LeptonIsMuon, LeptonIsTau, nGenTauL, CAST(METnoX_pt/10. as int)*10"
database:
    - "/vols/cms/sdb15/Analysis/ZinvWidth/databases/201904_Apr/06_MCPdfVariations/sqlite_collector/DYJetsToLL/result_00100.db"
    - "/vols/cms/sdb15/Analysis/ZinvWidth/databases/201904_Apr/06_MCPdfVariations/sqlite_collector/DYJetsToLL/result_00300.db"
    - "/vols/cms/sdb15/Analysis/ZinvWidth/databases/201904_Apr/06_MCPdfVariations/sqlite_collector/EWKV2Jets/result_00019.db"
    - "/vols/cms/sdb15/Analysis/ZinvWidth/databases/201904_Apr/06_MCPdfVariations/sqlite_collector/G1Jet/result_00100.db"
    - "/vols/cms/sdb15/Analysis/ZinvWidth/databases/201904_Apr/06_MCPdfVariations/sqlite_collector/G1Jet/result_00236.db"
    - "/vols/cms/sdb15/Analysis/ZinvWidth/databases/201904_Apr/06_MCPdfVariations/sqlite_collector/QCD/result_00199.db"
    - "/vols/cms/sdb15/Analysis/ZinvWidth/databases/201904_Apr/06_MCPdfVariations/sqlite_collector/WJetsToLNu/result_00100.db"
    - "/vols/cms/sdb15/Analysis/ZinvWidth/databases/201904_Apr/06_MCPdfVariations/sqlite_collector/WJetsToLNu/result_00339.db"
    - "/vols/cms/sdb15/Analysis/ZinvWidth/databases/201904_Apr/06_MCPdfVariations/sqlite_collector/ZJetsToNuNu/result_00030.db"
